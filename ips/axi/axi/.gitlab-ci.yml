variables:
  VSIM: vsim-10.6b -64
  VLIB: vlib-10.6b
  VLOG: vlog-10.6b -64
  SYNOPSYS_DC: synopsys-2016.03 dc_shell -64bit

before_script:
  - export PATH=~fschuiki/.cargo/bin:$PATH
  - mkdir -p build

vsim:
  stage: build
  script:
    - >
      if ! memora lookup vsim; then
        cd build && ../scripts/compile_vsim.sh
        memora insert vsim
      fi

synopsys_dc:
  stage: build
  script:
    - cd build
    - ../scripts/synth.sh

axi_to_axi_lite:
  stage: test
  script:
    - >
      if ! memora lookup axi_to_axi_lite; then
        memora get vsim
        cd build && ../scripts/run_vsim.sh axi_to_axi_lite
        memora insert axi_to_axi_lite
      fi
